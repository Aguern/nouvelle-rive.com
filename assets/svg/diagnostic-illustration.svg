<svg viewBox="0 0 400 300" fill="none" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <!-- Gradient pour la loupe -->
    <radialGradient id="magnifierGradient" cx="50%" cy="50%" r="50%">
      <stop offset="0%" style="stop-color:currentColor;stop-opacity:0.1"/>
      <stop offset="70%" style="stop-color:currentColor;stop-opacity:0.3"/>
      <stop offset="100%" style="stop-color:currentColor;stop-opacity:0.6"/>
    </radialGradient>

    <!-- Gradient pour les processus -->
    <linearGradient id="processGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3B82F6;stop-opacity:0.6"/>
      <stop offset="50%" style="stop-color:#1D4ED8;stop-opacity:0.4"/>
      <stop offset="100%" style="stop-color:#1E3A8A;stop-opacity:0.8"/>
    </linearGradient>

    <!-- Pattern pour les données analysées -->
    <pattern id="dataPattern" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse">
      <rect width="20" height="20" fill="none"/>
      <circle cx="10" cy="10" r="1.5" fill="currentColor" opacity="0.2">
        <animate attributeName="opacity" values="0.2;0.6;0.2" dur="2s" repeatCount="indefinite"/>
      </circle>
    </pattern>
  </defs>

  <!-- Zone d'analyse de processus (arrière-plan) -->
  <rect x="50" y="50" width="250" height="150" rx="15" fill="url(#dataPattern)"
        stroke="currentColor" stroke-width="2" opacity="0.3">
    <animate attributeName="opacity" values="0.3;0.5;0.3" dur="4s" repeatCount="indefinite"/>
  </rect>

  <!-- Processus analysés - représentés par des formes interconnectées -->
  <g stroke="currentColor" stroke-width="2" fill="none" opacity="0.6">
    <!-- Processus 1 -->
    <rect x="80" y="80" width="40" height="25" rx="5">
      <animate attributeName="stroke-width" values="2;3;2" dur="3s" repeatCount="indefinite"/>
    </rect>
    <text x="100" y="97" text-anchor="middle" font-size="8" fill="currentColor" opacity="0.7">P1</text>

    <!-- Processus 2 -->
    <rect x="140" y="120" width="40" height="25" rx="5">
      <animate attributeName="stroke-width" values="2;3;2" dur="3s" repeatCount="indefinite" begin="0.5s"/>
    </rect>
    <text x="160" y="137" text-anchor="middle" font-size="8" fill="currentColor" opacity="0.7">P2</text>

    <!-- Processus 3 -->
    <rect x="200" y="90" width="40" height="25" rx="5">
      <animate attributeName="stroke-width" values="2;3;2" dur="3s" repeatCount="indefinite" begin="1s"/>
    </rect>
    <text x="220" y="107" text-anchor="middle" font-size="8" fill="currentColor" opacity="0.7">P3</text>

    <!-- Connexions entre processus -->
    <path d="M120,92 L140,132" stroke-dasharray="5,5" opacity="0.4">
      <animate attributeName="stroke-dashoffset" values="0;10" dur="2s" repeatCount="indefinite"/>
    </path>
    <path d="M180,132 L200,102" stroke-dasharray="5,5" opacity="0.4">
      <animate attributeName="stroke-dashoffset" values="0;10" dur="2s" repeatCount="indefinite" begin="0.5s"/>
    </path>
  </g>

  <!-- Loupe d'analyse (élément principal) -->
  <g transform="translate(280, 80)">
    <!-- Verre de la loupe -->
    <circle cx="0" cy="0" r="45" fill="url(#magnifierGradient)"
            stroke="currentColor" stroke-width="3" opacity="0.8">
      <animate attributeName="r" values="45;48;45" dur="2s" repeatCount="indefinite"/>
    </circle>

    <!-- Manche de la loupe -->
    <line x1="32" y1="32" x2="55" y2="55" stroke="currentColor" stroke-width="4"
          stroke-linecap="round" opacity="0.8">
      <animateTransform attributeName="transform" type="rotate"
                        values="0 43 43;5 43 43;0 43 43" dur="3s" repeatCount="indefinite"/>
    </line>

    <!-- Reflet sur la loupe -->
    <ellipse cx="-15" cy="-15" rx="12" ry="8" fill="currentColor" opacity="0.2"
             transform="rotate(-45)">
      <animate attributeName="opacity" values="0.2;0.4;0.2" dur="2s" repeatCount="indefinite"/>
    </ellipse>

    <!-- Zone grossie visible dans la loupe -->
    <g clip-path="circle(40px at 0 0)" opacity="0.6">
      <!-- Détails grossis du processus -->
      <rect x="-25" y="-15" width="20" height="12" rx="2" fill="none"
            stroke="currentColor" stroke-width="1.5">
        <animate attributeName="opacity" values="0.6;1;0.6" dur="2s" repeatCount="indefinite"/>
      </rect>
      <rect x="-25" y="5" width="30" height="12" rx="2" fill="none"
            stroke="currentColor" stroke-width="1.5">
        <animate attributeName="opacity" values="0.6;1;0.6" dur="2s" repeatCount="indefinite" begin="0.3s"/>
      </rect>

      <!-- Points de données dans le détail -->
      <g fill="currentColor">
        <circle cx="-20" cy="-10" r="1.5" opacity="0.7">
          <animate attributeName="opacity" values="0.7;1;0.7" dur="1.5s" repeatCount="indefinite"/>
        </circle>
        <circle cx="-15" cy="-5" r="1" opacity="0.6">
          <animate attributeName="opacity" values="0.6;0.9;0.6" dur="1.8s" repeatCount="indefinite" begin="0.2s"/>
        </circle>
        <circle cx="-20" cy="10" r="1.2" opacity="0.8">
          <animate attributeName="opacity" values="0.8;1;0.8" dur="1.6s" repeatCount="indefinite" begin="0.5s"/>
        </circle>
      </g>
    </g>
  </g>

  <!-- Indicateurs d'analyse qui remontent -->
  <g fill="currentColor" opacity="0.5">
    <!-- Métriques découvertes -->
    <g transform="translate(100, 30)">
      <rect x="-20" y="-8" width="40" height="16" rx="8" fill="currentColor" opacity="0.1"/>
      <text x="0" y="3" text-anchor="middle" font-size="10" fill="currentColor">89%</text>
      <animateTransform attributeName="transform"
                        type="translate" values="100,30; 100,15; 100,30"
                        dur="3s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.5;0.8;0.5" dur="3s" repeatCount="indefinite"/>
    </g>

    <g transform="translate(180, 25)">
      <rect x="-25" y="-8" width="50" height="16" rx="8" fill="currentColor" opacity="0.1"/>
      <text x="0" y="3" text-anchor="middle" font-size="10" fill="currentColor">Goulet</text>
      <animateTransform attributeName="transform"
                        type="translate" values="180,25; 180,10; 180,25"
                        dur="3.5s" repeatCount="indefinite" begin="0.5s"/>
      <animate attributeName="opacity" values="0.5;0.9;0.5" dur="3.5s" repeatCount="indefinite" begin="0.5s"/>
    </g>

    <g transform="translate(250, 35)">
      <rect x="-20" y="-8" width="40" height="16" rx="8" fill="currentColor" opacity="0.1"/>
      <text x="0" y="3" text-anchor="middle" font-size="10" fill="currentColor">+25%</text>
      <animateTransform attributeName="transform"
                        type="translate" values="250,35; 250,20; 250,35"
                        dur="2.8s" repeatCount="indefinite" begin="1s"/>
      <animate attributeName="opacity" values="0.5;0.7;0.5" dur="2.8s" repeatCount="indefinite" begin="1s"/>
    </g>
  </g>

  <!-- Lignes de scan pour l'effet d'analyse -->
  <g stroke="currentColor" stroke-width="1" opacity="0.3">
    <line x1="50" y1="80" x2="350" y2="80">
      <animate attributeName="y1" values="80;200;80" dur="4s" repeatCount="indefinite"/>
      <animate attributeName="y2" values="80;200;80" dur="4s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="4s" repeatCount="indefinite"/>
    </line>

    <line x1="50" y1="120" x2="350" y2="120">
      <animate attributeName="y1" values="120;200;80" dur="4s" repeatCount="indefinite" begin="1s"/>
      <animate attributeName="y2" values="120;200;80" dur="4s" repeatCount="indefinite" begin="1s"/>
      <animate attributeName="opacity" values="0.2;0.6;0.2" dur="4s" repeatCount="indefinite" begin="1s"/>
    </line>
  </g>

  <!-- Titre intégré -->
  <text x="200" y="280" text-anchor="middle" font-size="14" font-weight="600"
        fill="currentColor" opacity="0.7">
    Diagnostic & Cartographie des processus
  </text>

  <!-- Flèches d'analyse -->
  <g stroke="currentColor" stroke-width="2" fill="currentColor" opacity="0.4">
    <defs>
      <marker id="arrowDiag" markerWidth="8" markerHeight="8" refX="6" refY="3"
              orient="auto" markerUnits="strokeWidth">
        <polygon points="0,0 0,6 6,3" fill="currentColor"/>
      </marker>
    </defs>

    <path d="M70,70 Q85,65 100,70" marker-end="url(#arrowDiag)" fill="none">
      <animate attributeName="opacity" values="0.4;0.7;0.4" dur="2s" repeatCount="indefinite"/>
    </path>

    <path d="M130,110 Q145,105 160,110" marker-end="url(#arrowDiag)" fill="none">
      <animate attributeName="opacity" values="0.4;0.7;0.4" dur="2s" repeatCount="indefinite" begin="0.5s"/>
    </path>
  </g>
</svg>